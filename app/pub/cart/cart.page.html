<ion-header no-border>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="pub"></ion-back-button>
    </ion-buttons>
    <ion-title style="text-align: left;">Keranjang Belanja</ion-title>
    <ion-buttons slot="end">
      <ion-button style="text-transform:none">&nbsp;</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>


<ion-content id="content">
  <ion-refresher slot="fixed" (ionRefresh)="reload($event)">
    <ion-refresher-content
      pullingIcon="arrow-dropdown"
      pullingText="Pull to refresh"
      refreshingSpinner="dots"
      refreshingText="Perbarui data..">
    </ion-refresher-content>
  </ion-refresher>
  <ion-grid class="ion-no-padding">
    <ion-row class="ion-no-padding">
      <ion-col *ngIf="total == 0" size="12" style="margin-top: 24px; text-align: center;" class="ion-no-padding">
        <div class="div_12">
          <img src="/assets/img/cute_cart.png" style="border-radius: 0px 0px 20px 20px; border-bottom: 4px solid #69bb7b; width: 250px; height: 250px;">
        </div>
        <div class="div_12">
          <ion-label style="text-align: left; color: #a7a7a7; width: 100%; font-size:0.8rem;">Keranjang kamu masih kosong</ion-label>
        </div>
        <div class="div_12" style="text-align: left; padding-left: 8px; padding-top: 8px; margin-top: 36px; margin-bottom: 8px; border-top: 0.5px solid #e4e4e4">
          <label style="color: darkslategray;">Produk yang pernah kamu lihat :</label>
        </div>
        <div class="div_12 div_strip ion-activatable" *ngFor="let seenn of seen_datas">
          <ion-row (click)="goto_produk_det(seenn.produk_id)" style="height: 100px;">
            <ion-col size="4">
              <div style="height: 90px;">
                <img style="height: 100%; width: auto;" src="{{seenn.gambar_url}}"/>
              </div>
            </ion-col>
            <ion-col size="4">
              <label style="margin-bottom: 2px; display: block; font-size: 0.8em; font-weight: bolder; color: rgb(14, 23, 32);">{{seenn.nama}}</label>
              <label style="margin-bottom: 6px; display: block; font-size: 0.7em; font-weight: normal; color: rgb(129, 129, 129);">{{seenn.keterangan}}</label>
  
              <label *ngIf="seenn.stok < 1" style="display: block; font-size: 0.8em; font-weight: normal; color: indianred">Stok Tersedia : {{seenn.stok}}</label>
              <label *ngIf="seenn.stok > 0" style="display: block; font-size: 0.8em; font-weight: normal; color: mediumseagreen">Stok Tersedia : {{seenn.stok}}</label>
            </ion-col>
            <ion-col size="4" style="text-align: right;">
              <label style="margin-bottom: 2px; display: inline-block; font-size: 0.8em; font-weight: bolder; color: indianred">Rp. {{seenn.harga_jual_th}} &nbsp;</label>
              <label *ngIf="seenn.satuan_nama" style="font-size: 0.8em; font-weight: bolder; color: darkslategrey; display: inline-block;"> / {{seenn.satuan_nama}}</label>
            </ion-col>
          </ion-row>
          <ion-ripple-effect ></ion-ripple-effect>
        </div>

      </ion-col>
      
      <ion-col class="ion-activatable ion-no-padding" size="12" *ngFor="let cart_data of cart_datas" style="height: 120px; border: #f2f2f2; border-style: solid; border-width: 0px 0px 0.2px 0px;">
        <ion-row style="height: 100px;">
          <ion-col size="4">
            <div style="height: 90px;">
              <img style="height: 100%; width: auto;" src="{{cart_data.gambar_url_produk}}"/>
            </div>
          </ion-col>

          <ion-col size="8" class="ion-no-padding" style="margin-top: 8px;">
            <ion-row>
              <ion-col size="12" class="ion-no-padding">
                <ion-row>
                  <ion-col size="5" class="ion-no-padding">
                    <label style="font-size: 0.8em; height: 100%; font-weight: bolder; color: rgb(14, 23, 32);">{{cart_data.nama_produk}}</label>
                  </ion-col>
                  <ion-col size="5" style="text-align: right;" class="ion-no-padding">
                    <label style="display: inline-block; font-size: 0.8em; font-weight: bolder; color: indianred">Rp. {{cart_data.harga_jual_th_produk}} &nbsp;</label>
                  </ion-col>
                  <ion-col size="2" class="ion-no-padding">
                    <ion-button (click)="set_qty(cart_data['produk_id'], 0)" size="small" style="width: 35px; border: #f2f2f2; border-style: solid; border-radius: 4px 4px 4px 4px; border-width: 0.8px 0.8px 0.8px 0.8px;" color="pale-grey">
                      <ion-icon size="small" slot="icon-only" name="close" ></ion-icon>
                    </ion-button>
                  </ion-col>
                </ion-row>
              </ion-col>
              <ion-col size="10" style="text-align: center; margin-top: 10px;">
                <ion-row>
                  <ion-col size="4" class="ion-no-padding" style="text-align: right;">
                    <ion-button (click)="plus_qty(cart_data)" size="small" style="width: 35px; border: #f2f2f2; border-style: solid; border-radius: 4px 4px 4px 4px; border-width: 0.8px 0.8px 0.8px 0.8px;" color="pale-grey">
                      <ion-icon size="small" slot="icon-only" name="add"></ion-icon>
                    </ion-button>
                  </ion-col>
                  <ion-col size="4" class="ion-no-padding" style="text-align: center;">
                    <ion-input (ionChange)="change_qty($event, cart_data['produk_id'])" size="small" minValue="0" class="ion-no-padding" value="{{cart_data['jumlah']}}" inputmode="numeric" style="width: 100%; height: 100%;  padding-left: 0px; margin: 0px;"></ion-input>
                  </ion-col>
                  <ion-col size="4" class="ion-no-padding" style="text-align: left;">
                    <ion-button *ngIf="cart_data['jumlah'] > 1" (click)="minus_qty(cart_data)" size="small" style="width: 35px; border: #f2f2f2; border-style: solid; border-radius: 4px 4px 4px 4px; border-width: 0.8px 0.8px 0.8px 0.8px;" color="pale-grey">
                      <ion-icon size="small" slot="icon-only" name="remove"></ion-icon>
                    </ion-button>
                  </ion-col>
                </ion-row>
              </ion-col>
              <ion-col size="2">

              </ion-col>
            </ion-row>
          </ion-col>

        </ion-row>
        
        <ion-ripple-effect ></ion-ripple-effect>
      </ion-col>
    </ion-row>
  </ion-grid>

</ion-content>

<ion-footer *ngIf="total > 0" style="text-align: center;"  no-border>
  <ion-grid>
    <ion-row>
      <ion-col size="12" style="border: #f2f2f2; border-style: solid; border-width: 0.2px 0px 0.2px 0px;">
        <ion-row>
          <ion-col size="6" style="padding-left: 4px; text-align: left;">
            <label>Total Pembelian :</label>
          </ion-col>
          <ion-col size="6" style="padding-right: 4px; text-align: right;">
            <label>Rp.{{(total || 0 | number: '2.':'':'id').replace(',', '.') }}</label>
          </ion-col>
        </ion-row>
      </ion-col>
      <ion-col size="12">
        <ion-button  color="new" style="text-transform:none; margin-top: 4px; margin-bottom: 8px;">Lanjut Order</ion-button>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-footer>